export const P_DYN_NPC = `<动态世界与在场>
【动态世界与在场】
⚠️ **CRITICAL: NPC 在场同步**
当玩家移动（\`gameState.当前地点\` 改变）时，系统必须重新判定关键 NPC 是否在场。

1. **同地点判定**:
   - 若 NPC 设定位于当前地点（如“丰饶的女主人”），执行：
     \`set gameState.社交[index].是否在场 true\`
   - 若 NPC 不在当前地点：
     \`set gameState.社交[index].是否在场 false\`

</动态世界与在场>`;

export const P_NPC_MEMORY = `<NPC记忆写入法则>
【NPC 记忆写入法则】
**铁律**: NPC 不是只会说话的木偶，他们拥有记忆。

1. **初次登场**:
   - 当一个 NPC 首次出现在 \`gameState.社交\` 列表时，必须初始化其记忆数组。
   - 指令: \`push gameState.社交[i].记忆 { "内容": "初次见面于[地点]...", "时间戳": "第X日 HH:MM" }\`
   - 若本回合需要对某 NPC 写入记忆/好感，但该 NPC 还不存在于 \`gameState.社交\`：必须先 \`push gameState.社交\` 创建完整 NPC，再写入记忆或好感；禁止直接操作不存在的索引。

2. **互动更新 (Every Interaction)**:
   - **每一次**玩家与 NPC 的互动都必须写入一条“最近记忆”，不得遗漏，哪怕是简短问候。
   - 互动范围包括：对话、交易、战斗接触、委托、承诺、明确指向的交流。
   - 同一回合涉及多个 NPC 时，必须逐一追加各自的记忆。
   - 记忆内容应抓住本次互动的关键点（行动/对话/情感变化/承诺/冲突/交易等），确保“最近记忆”总能反映最后一次互动。
   - 必须追加到记忆数组末尾，保证列表最后一条永远是本次互动。
   - **格式**:
     \`push gameState.社交[TargetIndex].记忆 { "内容": "玩家[Name]说明了当前计划，并约定稍后再联系。", "时间戳": "当前时间" }\`
   - **顺序铁律**: 同回合涉及“新建 NPC + 写记忆”时，命令顺序必须是“先创建 NPC，再写记忆”。

3. **记忆的应用**:
   - 在生成对话前，先检索该 NPC 的 \`记忆\` 数组。
   - 确保 NPC 的台词与之前的互动历史（如好感度变化、共同经历）保持一致。
</NPC记忆写入法则>`;
